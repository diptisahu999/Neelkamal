<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_company_form_inheirted" model="ir.ui.view">
        <field name="name">view_company_form_inheirted</field>
        <field name="model">res.company</field>
        <field name="inherit_id" ref="base.view_company_form"/>
        <field name="arch" type="xml">

            <xpath expr="//form/sheet/notebook/page" position="after">
                <page string="IndiaMart Configration">

                    <div class="o_setting_right_pane">
                        <field name="is_indiamart" string="IndiaMart Configration"/>
                        <label string="IndiaMart Configration" for="is_indiamart"/>
                    </div>
                    <button type="object" class="btn-primary" name="crm_indiamart_history_action"
                            invisible="is_indiamart != True">
                        <field string="IndiaMart Leads" name="indiamart_leads_count" widget="statinfo"/>
                    </button>
                    <group>
                        <group>
                            <field name="indiamart_mobile" password="True" invisible="is_indiamart != True"
                                   required="is_indiamart == True"/>
                            <field name="last_fetch_update_time" invisible="is_indiamart != True"/>
                        </group>
                        <group>
                            <field name="indiamart_api_key" password="True" invisible="is_indiamart != True"
                                   required="is_indiamart == True"/>
                        </group>
                    </group>
                    <group>
                        <button string="Fetch Now" name="%(res_company_wizard_action)d" type="action"
                                class="btn-primary" invisible="is_indiamart != True"/>
                    </group>
                </page>
            </xpath>
        </field>
    </record>

    <data noupdate="1">
        <record id="stpl_indiamart_base_settings" model="res.config.settings">
            <field eval="True" name="group_use_lead"/>
        </record>

        <function model="res.config.settings" name="execute">
            <value model="res.config.settings"
                   search="[('id', '=', ref('stpl_indiamart_connector.stpl_indiamart_base_settings'))]"
            />
        </function>
    </data>

</odoo>
